{"ast":null,"code":"import _asyncToGenerator from \"D:\\\\Personal\\\\ChatGPT\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { Configuration, OpenAIApi } from 'openai';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nfunction AppComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate2(\"innerHTML\", \"\", item_r2.person, \": \", item_r2.response, \"\", i0.ɵɵsanitizeHtml);\n    i0.ɵɵproperty(\"ngClass\", item_r2.cssClass);\n  }\n}\n\nfunction AppComponent_img_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 15);\n  }\n}\n\nexport class AppComponent {\n  constructor(http) {\n    this.http = http;\n    this.title = 'ChatGPT';\n    this.chatConversation = [];\n    this.promptText = '';\n    this.showSpinner = false;\n  }\n\n  ngOnInit() {}\n\n  checkResponse() {\n    this.pushChatContent(this.promptText, 'You', 'person');\n    this.invokeGPT();\n  }\n\n  pushChatContent(content, person, cssClass) {\n    const chatToPush = {\n      person: person,\n      response: content,\n      cssClass: cssClass\n    };\n    this.chatConversation.push(chatToPush);\n  }\n\n  getText(data) {\n    return data.split('\\n').filter(f => f.length > 0);\n  }\n\n  invokeGPT() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.promptText.length < 2) return;\n\n      try {\n        _this.response = undefined;\n        let configuration = new Configuration({\n          apiKey: environment.apiKey\n        });\n        let openai = new OpenAIApi(configuration);\n        let requestData = {\n          model: 'text-davinci-003',\n          prompt: _this.promptText,\n          temperature: 0.95,\n          max_tokens: 150,\n          top_p: 1.0,\n          frequency_penalty: 0.0,\n          presence_penalty: 0.0,\n          stream: false\n        };\n        let apiResponse = yield openai.createCompletion(requestData); // const headers = new HttpHeaders({\n        //   'Content-Type': 'application/json',\n        //   'Authorization': `Bearer ${environment.apiKey}`\n        // });\n        // const completion: any = await this.http.post(\"https://api.openai.com/v1/completions\", requestData, { headers }).toPromise();\n\n        _this.showSpinner = true;\n        _this.response = apiResponse.data;\n        _this.showSpinner = false;\n\n        _this.pushChatContent(_this.response.choices[0].text.trim(), 'Bot', 'bot');\n\n        _this.showSpinner = false;\n      } catch (error) {\n        _this.showSpinner = false; // Consider adjusting the error handling logic for your use case\n\n        if (error.response) {\n          console.error(error.response.status, error.response.data);\n        } else {\n          console.error(`Error with OpenAI API request: ${error.message}`);\n        }\n      }\n    })();\n  }\n\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\n\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 23,\n  vars: 3,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"col-md-12\"], [1, \"card\"], [1, \"card-header\", \"center\", \"text-primary\"], [1, \"card-body\"], [1, \"card-title\", \"text-success\", \"center\"], [1, \"col-md-2\"], [1, \"col-md-8\"], [1, \"frame-box\"], [4, \"ngFor\", \"ngForOf\"], [\"src\", \"../../assets/ZNeT.gif\", \"width\", \"50px\", \"height\", \"50px\", 4, \"ngIf\"], [\"row\", \"3\", \"cols\", \"15\", \"placeholder\", \"Start by asking what you are looking for\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\", \"push-right\", 3, \"click\"], [1, \"card-text\", \"padding\", 3, \"innerHTML\", \"ngClass\"], [\"src\", \"../../assets/ZNeT.gif\", \"width\", \"50px\", \"height\", \"50px\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n      i0.ɵɵelement(3, \"br\");\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"h4\", 4);\n      i0.ɵɵtext(6, \"Angular Chat powered by ChatGPT\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 5)(8, \"h6\", 6);\n      i0.ɵɵtext(9, \"You are now Angular Chat by ChatGPT\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 1);\n      i0.ɵɵelement(11, \"div\", 7);\n      i0.ɵɵelementStart(12, \"div\", 8)(13, \"div\", 9);\n      i0.ɵɵtemplate(14, AppComponent_div_14_Template, 2, 3, \"div\", 10);\n      i0.ɵɵelementStart(15, \"div\");\n      i0.ɵɵtemplate(16, AppComponent_img_16_Template, 1, 0, \"img\", 11);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(17, \"br\");\n      i0.ɵɵelementStart(18, \"textarea\", 12);\n      i0.ɵɵlistener(\"ngModelChange\", function AppComponent_Template_textarea_ngModelChange_18_listener($event) {\n        return ctx.promptText = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(19, \"br\");\n      i0.ɵɵelementStart(20, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_20_listener() {\n        return ctx.checkResponse();\n      });\n      i0.ɵɵtext(21, \"Send\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(22, \"div\", 7);\n      i0.ɵɵelementEnd()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(14);\n      i0.ɵɵproperty(\"ngForOf\", ctx.chatConversation);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showSpinner);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.promptText);\n    }\n  },\n  directives: [i2.NgForOf, i2.NgClass, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnNjc3MifQ== */\"]\n});","map":{"version":3,"sources":["D:/Personal/ChatGPT/src/app/app.component.ts"],"names":["Configuration","OpenAIApi","environment","i0","i1","i2","i3","AppComponent_div_14_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","item_r2","$implicit","ɵɵadvance","ɵɵpropertyInterpolate2","person","response","ɵɵsanitizeHtml","ɵɵproperty","cssClass","AppComponent_img_16_Template","AppComponent","constructor","http","title","chatConversation","promptText","showSpinner","ngOnInit","checkResponse","pushChatContent","invokeGPT","content","chatToPush","push","getText","data","split","filter","f","length","undefined","configuration","apiKey","openai","requestData","model","prompt","temperature","max_tokens","top_p","frequency_penalty","presence_penalty","stream","apiResponse","createCompletion","choices","text","trim","error","console","status","message","ɵfac","AppComponent_Factory","t","ɵɵdirectiveInject","HttpClient","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","AppComponent_Template","ɵɵtext","ɵɵtemplate","ɵɵlistener","AppComponent_Template_textarea_ngModelChange_18_listener","$event","AppComponent_Template_button_click_20_listener","directives","NgForOf","NgClass","NgIf","DefaultValueAccessor","NgControlStatus","NgModel","styles"],"mappings":"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","sourcesContent":["import { Configuration, OpenAIApi } from 'openai';\r\nimport { environment } from 'src/environments/environment';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/common/http\";\r\nimport * as i2 from \"@angular/common\";\r\nimport * as i3 from \"@angular/forms\";\r\nfunction AppComponent_div_14_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵelement(1, \"div\", 14);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const item_r2 = ctx.$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵpropertyInterpolate2(\"innerHTML\", \"\", item_r2.person, \": \", item_r2.response, \"\", i0.ɵɵsanitizeHtml);\r\n    i0.ɵɵproperty(\"ngClass\", item_r2.cssClass);\r\n} }\r\nfunction AppComponent_img_16_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelement(0, \"img\", 15);\r\n} }\r\nexport class AppComponent {\r\n    constructor(http) {\r\n        this.http = http;\r\n        this.title = 'ChatGPT';\r\n        this.chatConversation = [];\r\n        this.promptText = '';\r\n        this.showSpinner = false;\r\n    }\r\n    ngOnInit() {\r\n    }\r\n    checkResponse() {\r\n        this.pushChatContent(this.promptText, 'You', 'person');\r\n        this.invokeGPT();\r\n    }\r\n    pushChatContent(content, person, cssClass) {\r\n        const chatToPush = { person: person, response: content, cssClass: cssClass };\r\n        this.chatConversation.push(chatToPush);\r\n    }\r\n    getText(data) {\r\n        return data.split('\\n').filter(f => f.length > 0);\r\n    }\r\n    async invokeGPT() {\r\n        if (this.promptText.length < 2)\r\n            return;\r\n        try {\r\n            this.response = undefined;\r\n            let configuration = new Configuration({ apiKey: environment.apiKey });\r\n            let openai = new OpenAIApi(configuration);\r\n            let requestData = {\r\n                model: 'text-davinci-003',\r\n                prompt: this.promptText,\r\n                temperature: 0.95,\r\n                max_tokens: 150,\r\n                top_p: 1.0,\r\n                frequency_penalty: 0.0,\r\n                presence_penalty: 0.0,\r\n                stream: false\r\n            };\r\n            let apiResponse = await openai.createCompletion(requestData);\r\n            // const headers = new HttpHeaders({\r\n            //   'Content-Type': 'application/json',\r\n            //   'Authorization': `Bearer ${environment.apiKey}`\r\n            // });\r\n            // const completion: any = await this.http.post(\"https://api.openai.com/v1/completions\", requestData, { headers }).toPromise();\r\n            this.showSpinner = true;\r\n            this.response = apiResponse.data;\r\n            this.showSpinner = false;\r\n            this.pushChatContent(this.response.choices[0].text.trim(), 'Bot', 'bot');\r\n            this.showSpinner = false;\r\n        }\r\n        catch (error) {\r\n            this.showSpinner = false;\r\n            // Consider adjusting the error handling logic for your use case\r\n            if (error.response) {\r\n                console.error(error.response.status, error.response.data);\r\n            }\r\n            else {\r\n                console.error(`Error with OpenAI API request: ${error.message}`);\r\n            }\r\n        }\r\n    }\r\n}\r\nAppComponent.ɵfac = function AppComponent_Factory(t) { return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.HttpClient)); };\r\nAppComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: AppComponent, selectors: [[\"app-root\"]], decls: 23, vars: 3, consts: [[1, \"container\"], [1, \"row\"], [1, \"col-md-12\"], [1, \"card\"], [1, \"card-header\", \"center\", \"text-primary\"], [1, \"card-body\"], [1, \"card-title\", \"text-success\", \"center\"], [1, \"col-md-2\"], [1, \"col-md-8\"], [1, \"frame-box\"], [4, \"ngFor\", \"ngForOf\"], [\"src\", \"../../assets/ZNeT.gif\", \"width\", \"50px\", \"height\", \"50px\", 4, \"ngIf\"], [\"row\", \"3\", \"cols\", \"15\", \"placeholder\", \"Start by asking what you are looking for\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\", \"push-right\", 3, \"click\"], [1, \"card-text\", \"padding\", 3, \"innerHTML\", \"ngClass\"], [\"src\", \"../../assets/ZNeT.gif\", \"width\", \"50px\", \"height\", \"50px\"]], template: function AppComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\r\n        i0.ɵɵelement(3, \"br\");\r\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"h4\", 4);\r\n        i0.ɵɵtext(6, \"Angular Chat powered by ChatGPT\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"h6\", 6);\r\n        i0.ɵɵtext(9, \"You are now Angular Chat by ChatGPT\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(10, \"div\", 1);\r\n        i0.ɵɵelement(11, \"div\", 7);\r\n        i0.ɵɵelementStart(12, \"div\", 8)(13, \"div\", 9);\r\n        i0.ɵɵtemplate(14, AppComponent_div_14_Template, 2, 3, \"div\", 10);\r\n        i0.ɵɵelementStart(15, \"div\");\r\n        i0.ɵɵtemplate(16, AppComponent_img_16_Template, 1, 0, \"img\", 11);\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelement(17, \"br\");\r\n        i0.ɵɵelementStart(18, \"textarea\", 12);\r\n        i0.ɵɵlistener(\"ngModelChange\", function AppComponent_Template_textarea_ngModelChange_18_listener($event) { return ctx.promptText = $event; });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(19, \"br\");\r\n        i0.ɵɵelementStart(20, \"button\", 13);\r\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_20_listener() { return ctx.checkResponse(); });\r\n        i0.ɵɵtext(21, \"Send\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelement(22, \"div\", 7);\r\n        i0.ɵɵelementEnd()()()()()();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(14);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.chatConversation);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.showSpinner);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngModel\", ctx.promptText);\r\n    } }, directives: [i2.NgForOf, i2.NgClass, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnNjc3MifQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}